<div class="share-film">

    <header class="modal-header">
    	<h3 class="modal-title">
	    	<span data-ng-show="!withTeam && !withOtherUsers && !withPublic">Pick how you would like to share</span>
            <span data-ng-show="withTeam">Share this reel with your team</span>
	        <span data-ng-show="withOtherUsers">Share this film with other Krossover users</span>
	        <span data-ng-show="withPublic">Share this film via public URL</span>
	        <i class="icon icon-remove pull-right" data-ng-click="$dismiss()"></i>
	    </h3>

    </header>

    <div class="modal-body">

        <div class="share-options-container" data-ng-show="!withTeam && !withOtherUsers && !withPublic">
        	<!--With Team Option for Game-->
            <div class="share-options option-your-team" data-ng-show="isGame">
        		<h3>Your Team</h3>
        		<i class="icon icon-group"></i>
        		Games are automatically shared amongst team coaches and athletes on your active roster.
        	</div>
            <!--With Team Option for Reel-->
            <div class="share-options option-your-team-reels" data-ng-show="!isGame" data-ng-click="withTeam = true">
                <h3>Your Team</h3>
                <i class="icon icon-group"></i>
            </div>
        	<div class="share-options middle-option" data-ng-click="withOtherUsers = true">
        		<h3>Other Krossover Users</h3>
        		<i class="icon icon-logo"></i>
        	</div>
        	<div class="share-options" data-ng-click="withPublic = true">
        		<h3>Recruiters or others via public URL</h3>
        		<i class="icon icon-globe"></i>
        	</div>
        </div>

        <div class="sharing-with-team-container" data-ng-show="withTeam">
            <div class="info-box">
                <span data-ng-show="currentUser.is(ROLES.COACH)">Reels are automatically shared amongst team coaches.<br/></span>
                Players must have an email address associated with their profile in order to be selected.
            </div>

            <div class="team-share-options">
                <a data-ng-click="selectAllPlayers()">Select All</a>
                <a data-ng-click="deselectAllPlayers()">Deselect All</a>
                <select data-ng-show="currentUser.is(ROLES.ATHLETE) && teams.length > 1" data-ng-model="team" data-ng-options="currentTeam.name for currentTeam in teams"></select>
            </div>

            <div class="team-share-table">
                <div class="team-share-player" data-ng-repeat="player in playersWithAccounts" data-ng-click="shareReelWithPlayerToggle(player)" data-ng-class="{'player-selected': film.isSharedWithUser(usersMap[player.userId])}">
                    <i class="icon icon-check-empty" data-ng-show="!film.isSharedWithUser(usersMap[player.userId])"></i>
                    <i class="icon icon-check-square-o" data-ng-show="film.isSharedWithUser(usersMap[player.userId])"></i>
                    <span data-ng-show="team.roster.playerInfo[player.id].jerseyNumber">#{{team.roster.playerInfo[player.id].jerseyNumber}}&nbsp;</span> {{player.firstName}} {{player.lastName}}
                </div>
            </div>

            <div class="button-row">
                <button class="btn btn-default" data-ng-click="withTeam = false"><i class="icon icon-chevron-left"></i> Back</button>
                <button class="btn btn-primary pull-right" data-ng-click="$close()">Done</button>
            </div>
        </div>

        <div class="sharing-with-others-container" data-ng-show="withOtherUsers">
        	<div class="info-box">
        		<span data-ng-show="isGame">Games are automatically shared amongst team coaches and athletes on your active roster.<br/></span>
        		If the person you want to share with does not have a Krossover account, <a data-ng-click="withOtherUsers = false; withPublic = true">share a URL</a> with them.
        	</div>
        	<span data-ng-show="film.isSharedWithUser(user) && (isGame || !team.isMember(user.id) || !user.is(ROLES.ATHLETE))" class="share-error-message"><i class="icon icon-warning"></i> That user is already being shared with.</span>
            <span data-ng-show="!isGame && team.isMember(user.id) && user.is(ROLES.ATHLETE)" class="share-error-message"><i class="icon icon-warning"></i> Add players on your team from the <a data-ng-click="withOtherUsers = false; withTeam = true">team sharing page</a>.</span>
        	<span data-ng-show="user.id === currentUser.id" class="share-error-message"><i class="icon icon-warning"></i> You cannot share with yourself.</span>
        	<h3>Sharing with:</h3>
        	<form>
        		<user-typeahead data-user="user" data-filter="filter"></user-typeahead>
        		<button type="submit" class="btn btn-primary" data-ng-disabled="!user.id || film.isSharedWithUser(user) || user.id === currentUser.id || (!isGame && team.isMember(user.id) && user.is(ROLES.ATHLETE))" data-ng-click="shareSubmit(user); user = null">Add</button>
        	</form>
        	<div class="how-to-search">
                <p>Start typing the last name of the user you want to share with.</p>
                <p data-ng-show="isGame && currentUser.is(ROLES.COACH)" class="public-breakdown-information">
                    Please note that if you share a breakdown with the public, the breakdown will automatically be available for all users you select below.
                </p>
            </div>
        	<div data-ng-show="film.getUserShares().length" class="shared-with-table">
        		<div class="shared-with-header">Name</div>
        		<div class="shared-with" data-ng-repeat="share in film.getUserShares()" data-ng-hide="!isGame && team.isMember(share.sharedWithUserId) && users.get(share.sharedWithUserId).is(ROLES.ATHLETE)">
        			<strong data-ng-class="{'user-for-game': isGame}">{{usersMap[share.sharedWithUserId].firstName}} {{usersMap[share.sharedWithUserId].lastName}}</strong>
                    <span class="pull-right">
                        <select data-ng-model="share.isBreakdownShared" data-ng-change="film.save()" data-ng-show="isGame">
                            <option value="false">Sharing raw film only</option>
                            <option value="true">Sharing raw film and breakdown</option>
                        </select>
                        <span data-ng-show="!isGame">Sharing reel</span>
                    	<i class="icon icon-remove" data-ng-click="shareRevoke(usersMap[share.sharedWithUserId])"></i>
                    </span>
        		</div>
        	</div>
        	<div class="button-row">
        		<button class="btn btn-default" data-ng-click="withOtherUsers = false"><i class="icon icon-chevron-left"></i> Back</button>
        		<button class="btn btn-primary pull-right" data-ng-click="$close()">Done</button>
        	</div>
        </div>

        <div class="sharing-with-public-container" data-ng-show="withPublic">
            <div class="info-box">
                <p data-ng-if="!linkActive">By clicking on "Publish to Web", you can share  this video with anyone by copying the link or embedding the video in your website.</p>
                <p data-ng-if="linkActive">If you would like to make the video private, no one will be able to access this game with this link.</p>
                <p data-ng-if="!linkActive">Anyone with this link will be able to access this video.</p>
                <p data-ng-if="linkActive">If you have shared this game with another Krossover user's account, making the video private will not remove it from their account.</p>
            </div>

            <div class="activate-row">
                <span class="video-status-private" data-ng-if="!linkActive">Video is currently private.</span>
                <span class="video-status-public" data-ng-if="linkActive">Video is now public on the web.</span>
                <button class="btn btn-primary pull-right" data-ng-click="togglePublicLink()">{{linkActive ? 'Make Private' : 'Publish to Web'}}</button>
            </div>
            <p class="public-share-option-title" data-ng-show="isGame && film.isDelivered() && linkActive">What would you like to share?</p>
            <div class="public-share-types" data-ng-show="isGame && film.isDelivered() && linkActive">
                <button type="button" class="btn-radio" data-ng-model="film.publicShare.isBreakdownShared" data-btn-radio="false" data-ng-change="film.save()" required>Share Raw Film Only</button>
                <button type="button" class="btn-radio" data-ng-model="film.publicShare.isBreakdownShared" data-btn-radio="true" data-ng-change="film.save()" required>Share Breakdown and Raw Film</button>
            </div>
            <p class="public-share-option-title" data-ng-show="linkActive">How would you like to share?</p>
            <div class="public-share-methods" data-ng-show="linkActive">
                <div class="method-row">
                    <span class="link-label">Share link with anyone</span>
                    <div class="public-link-box pull-right" data-ng-class="{inActive:!linkActive}">
                        <a data-ng-if="isGame" href="/intelligence/g/{{shortId}}" target="_blank">{{config.links.intelligence.uri}}/g/{{shortId}}</a>
                        <a data-ng-if="!isGame" href="/intelligence/r/{{shortId}}" target="_blank">{{config.links.intelligence.uri}}/r/{{shortId}}</a>
                    </div>
                </div>
                <div class="method-row">
                    <div class="public-link-box pull-right" data-ng-show="linkActive">
                        <code data-ng-show="isGame">&lt;iframe src="{{config.links.intelligence.uri}}/g/{{shortId}}" style="{{embedSize}}" allowfullscreen&gt;&lt;/iframe&gt;</code>
                        <code data-ng-show="!isGame">&lt;iframe src="{{config.links.intelligence.uri}}/r/{{shortId}}" style="{{embedSize}}" allowfullscreen&gt;&lt;/iframe&gt;</code>
                    </div>
                    <div class="method-column">
                        <p class="embed-label">Embed video on your website</p>
                        Video Size:
                        <select data-ng-model="embedSize">
                            <option value="width:480px;height:500px;">480x500</option>
                            <option value="width:720px;height:750px;">720x750</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="button-row">
                <button class="btn btn-default" data-ng-click="withPublic = false"><i class="icon icon-chevron-left"></i> Back</button>
                <button class="btn btn-primary pull-right" data-ng-click="$close()">Done</button>
            </div>
        </div>

    </div>

</div>
