<section class="queue" data-ng-controller="QueueController">

    <aside class="sidebar" data-ng-init="sidebar = true" data-ui-toggle="sidebar">

        <h3>Search</h3>

        <form role="form">

            <div class="form-group">

                <select class="form-control" name="sport" data-ng-model="filter.sport" data-ng-options="sport.id as sport.name for sport in sports">
                    <option value="">Pick a Sport</option>
                </select>

            </div>

            <div class="form-group">

                <select class="form-control" name="status" data-ng-model="filter.status">
                    <option value="">Status</option>
                    <option data-ng-value="status.id" data-ng-selected="status.id === filter.status" data-ng-repeat="status in GAME_STATUSES">{{status.name}}</option>
                </select>

            </div>

            <div class="form-group">

                <input class="form-control" name="id" placeholder="Game ID" data-ng-model="filter.gameId" type="search" autocomplete="on" list="queue-gameIds" autosave="queue-gameIds">
                <datalist id="queue-gameIds">
                    <option data-ng-repeat="games in queue | orderBy:'id'" value="{{game.id}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <input class="form-control" name="team" placeholder="Team Name" data-ng-model="filter.team" type="search" autocomplete="on" list="queue-teams" autosave="queue-teams">
                <datalist id="queue-teams">
                    <option data-ng-repeat="team in teams | unique:'name' | orderBy:'name'" value="{{team.name}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <input class="form-control" name="coach" placeholder="Coach Name" data-ng-model="filter.coachName" type="search" autocomplete="on" list="queue-coaches" autosave="queue-coaches">
                <datalist id="queue-coaches">
                    <option data-ng-repeat="coach in coaches | unique:'name' | orderBy:'name'" value="{{coach.name}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <input class="form-control" name="indexer" placeholder="Indexer Name" data-ng-model="filter.indexerName" type="search" autocomplete="on" list="queue-indexers" autosave="queue-indexers">
                <datalist id="queue-indexers">
                    <option data-ng-repeat="indexer in indexers | unique:'name' | orderBy:'name'" value="{{indexer.name}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <input class="form-control" name="assurer" placeholder="QA Name" data-ng-model="filter.assurerName" type="search" autocomplete="on" list="queue-assurers" autosave="queue-assurers">
                <datalist id="queue-assurers">
                    <option data-ng-repeat="assurer in assurers | unique:'name' | orderBy:'name'" value="{{assurer.name}}"></option>
                </datalist>

            </div>

        </form>

        <button class="btn-search" data-ng-show="sidebar" data-ng-click="search(filter)"><i class="icon-search"></i></button>
        <button class="btn-search" data-ng-hide="sidebar" data-ng-click="sidebar=!sidebar"><i class="icon-search"></i></button>

        <button class="btn-toggle-sidebar" data-ng-show="sidebar" data-ng-click="sidebar = false"><i class="icon-chevron-left"></i></button>
        <button class="btn-toggle-sidebar" data-ng-hide="sidebar" data-ng-click="sidebar = true"><i class="icon-chevron-right"></i></button>

    </aside>

    <div class="list" data-ng-hide="noResults">

        <div class="table-responsive">

            <table class="table table-striped table-hover">

                <tbody>

                    <tr data-ng-repeat="game in queue">

                        <td>{{sports[leagues[teams[game.teamId].leagueId]['sportId']]['name']}}</td>
                        <td>{{ game.id }}</td>
                        <td><a data-ui-sref="game-info({ id: game.id })">{{ teams[game.teamId].name }} vs<br>{{ teams[game.opposingTeamId].name }}</a></td>
                        <td>{{ users[teams[game.teamId].getHeadCoachRole().userId].lastName }}</td>
                        <td>{{ GAME_STATUSES[GAME_STATUS_IDS[game.status]].name }}</td>

                        <td>

                            <button class="btn btn-link" data-ng-if="!game.hasIndexerAssignment()" data-ng-click="assign('indexer', game.id)">Assign</button>

                            <ul data-ng-if="game.hasIndexerAssignment()" data-ng-repeat="assignment in game.indexerAssignments">

                                <li data-ng-if="!assignment.isQa">{{ users[assignment.userId].firstName }} {{ users[assignment.userId].lastName }}</li>

                            </ul>

                        </td>

                        <td>

                            <button class="btn btn-link" data-ng-if="!game.hasQaAssignment()" data-ng-click="assign('assurer', game.id)">Assign</button>

                            <ul data-ng-if="game.hasQaAssignment()" data-ng-repeat="assignment in game.indexerAssignments">

                                <li data-ng-if="assignment.isQa">{{ users[assignment.userId].firstName }} {{ users[assignment.userId].lastName }}</li>

                            </ul>

                        </td>

                    </tr>

                </tbody>

            </table>

        </div>

    </div>

    <div class="noresults" data-ng-show="noResults">

        <i class="icon-search"></i>
        <h1>No Results Found</h1>
        <h2>Try your search again.</h2>

    </div>

</section>

