<section class="users" data-ng-controller="UsersController">

    <aside class="sidebar" data-ng-init="sidebar = true" data-ui-toggle="sidebar">

        <x-button-add-new data-ng-click="add()">Add a new user</x-button-add-new>

        <h3>Search</h3>

        <form role="form">

            <div class="form-group">

                <input class="form-control" placeholder="Email" data-ng-model="filter.email" type="search" autocomplete="on" list="user-email" autosave="user-email">
                <datalist id="user-email">
                    <option data-ng-repeat="user in users | unique:'name' | orderBy:'name'" value="{{user.email}}"></option>
                </datalist>
            </div>

            <div class="form-group">

                <input class="form-control" placeholder="First Name" data-ng-model="filter.firstName" type="search" autocomplete="on" list="user-firstname" autosave="user-firstname">
                <datalist id="user-firstname">
                    <option data-ng-repeat="user in users | unique:'firstName' | orderBy:'firstName'" value="{{user.firstName}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <input class="form-control" placeholder="Last Name" data-ng-model="filter.lastName" type="search" autocomplete="on" list="user-lastname" autosave="user-lastname">
                <datalist id="user-lastname">
                    <option data-ng-repeat="user in users | unique:'lastName' | orderBy:'lastName'" value="{{user.lastName}}"></option>
                </datalist>

            </div>

            <div class="form-group">

                <select class="form-control" data-ng-model="filter.role" data-ng-options="role.type.id as role.type.name for role in ROLES | EditableRolesByRole: currentUser.currentRole">
                    <option value="">Role</option>
                </select>

            </div>

            <div class="form-group">

                <select class="form-control" data-ng-model="filter.isActive" data-ng-options="status.value as status.label for status in statuses">
                    <option value="">Status</option>
                </select>

            </div>

        </form>

        <button class="btn-search" data-ng-show="sidebar" data-ng-click="search(filter)"><i class="icon-search"></i></button>
        <button class="btn-search" data-ng-hide="sidebar" data-ng-click="sidebar=!sidebar"><i class="icon-search"></i></button>

        <button class="btn-toggle-sidebar" data-ng-show="sidebar" data-ng-click="sidebar = false"><i class="icon-chevron-left"></i></button>
        <button class="btn-toggle-sidebar" data-ng-hide="sidebar" data-ng-click="sidebar = true"><i class="icon-chevron-right"></i></button>

    </aside>

    <div class="list" data-ng-class="{nosidebar: !sidebar}" data-ng-hide="noResults">

        <div class="table-responsive">

            <table class="table table-striped table-hover">

                <tbody>

                    <tr data-ng-repeat="user in users">

                        <td><div class="email">{{user.email}}</div></td>

                        <td><div class="name"><a data-ui-sref="user-info({ id: user.id })">{{user.firstName}} {{user.lastName}}</a></div></td>

                        <td class="roles">

                            <ul>

                                <li data-ng-repeat="role in user.roles">

                                    <span data-ng-if="Users.is(role, HEAD_COACH)">Head Coach, {{ teams[role.teamId].name }}</span>
                                    <span data-ng-if="Users.is(role, ASSISTANT_COACH)">Assist. Coach, {{ teams[role.teamId].name }}</span>
                                    <span data-ng-if="Users.is(role, ATHLETE)">Athlete, {{ sports[leagues[teams[role.teamId].leagueId].sportId].name }}</span>
                                    <span data-ng-if="!Users.is(role, HEAD_COACH) && !Users.is(role, ASSISTANT_COACH) && !Users.is(role, ATHLETE)">{{role.type.name}}</span>

                                </li>

                            </ul>

                        </td>

                        <td>

                            <div class="active" data-ng-if="user.isActive">Active</div>
                            <div class="inactive" data-ng-if="!user.isActive">Inactive</div>

                        </td>

                    </tr>

                </tbody>

            </table>

        </div>

    </div>

    <div class="noresults" data-ng-show="noResults">

        <i class="icon-search"></i>
        <h1>No Results Found</h1>
        <h2>Try your search again.</h2>

    </div>

</section>

