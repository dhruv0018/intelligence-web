<div class="custom-tags-dropdown dropdown" dropdown is-open="status.isopen">
    <button class="btn btn-default dropdown-toggle" ng-class="{'btn-default': !status.isopen, 'btn-primary': status.isopen}" dropdown-toggle>Add Tag</button>
    <div class="tags-dropdown-menu dropdown-menu" ng-click="$event.stopPropagation()">
        <div class="selected-tags" ng-hide="!selectedTags.length">
            <custom-tag-pills ng-model="selectedTags"></custom-tag-pills>
        </div>

        <div class="search-tags">
            <input ng-model="filters.name" ng-change="updateFilteredTags()" ng-keypress="keyPressTracker($event, filters.name)" placeholder="Search Tags">
            <i class="icon icon-search"></i>
        </div>

        <div class="tags-list">
            <span class="tag-selection-label" ng-show="filters.name && !tagAlreadyExists(filters.name)">Create New Tag</span>
            <p class="new-tag" ng-click="createNewTag(filters.name)" ng-show="filters.name && !tagAlreadyExists(filters.name)">{{filters.name}}</p>

            <span class="tag-selection-label" ng-hide="filters.name">All Tags</span>
            <span class="tag-selection-label" ng-show="filters.name">Matching Tags</span>
            <ul ng-show="filteredTags.length">
                <li ng-repeat="tag in filteredTags" ng-click="selectTag(tag)">{{tag.name}}</li>
            </ul>
            <p ng-hide="filteredTags.length">No tags match your search</p>
        </div>

        <div class="tag-action-buttons">
            <a href ng-click="cancelTagging(); status.isopen = false">Cancel</a>
            <a href class="pull-right" ng-show="selectedTags.length" ng-click="applyTags(); status.isopen = false">Apply</a>
            <span class="pull-right" ng-hide="selectedTags.length">Apply</span>
        </div>
    </div>
</div>