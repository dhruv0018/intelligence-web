<!-- =============== MOBILE PLAYS =============== -->
<div ng-if="$root.viewport.name === VIEWPORTS.MOBILE.name">

    <div
        ng-switch
        on="isReelsPlay"
        ng-hide="!play.hasVisibleEvents && !isIndexer"
    >
        <!-- - - - - - - - - REEL PLAY - - - - - - - - -->
        <div
            ng-switch-when="true"
            class="play play__reel"
            ng-class="{ active: play.id == playManager.current.id, 'edit-mode': editFlag }"
        >
            <div class="playHeadingContainer">

                <div class="playHeading" ng-click="selectMobileClipPlay()">

                    <h4 class="title title-reel">

                        <krossover-play-summaries events="play.events"></krossover-play-summaries>

                        <span class="datePlayed">&nbsp;-&nbsp;&nbsp;{{game.datePlayed | date:'MMM. d, yyyy'}}</span>
                    </h4>

                    <h5 class="subtitle">
                        <span class="teams">{{team.name}} vs {{opposingTeam.name}}</span>
                    </h5>
                </div>

                <a
                    class="playplay"
                    ng-click="selectMobileClipPlay()"
                >
                    <i class="icon icon-play-circle"></i>
                </a>

            </div>

        </div>

        <!-- - - - - - - - - DEFAULT PLAY - - - - - - - - -->
        <!-- Default to 'active' since this is currently only used for public clips -->
        <div
            ng-switch-default
            class="active play play__reel"
            ng-class="{ active: play.id == playManager.current.id}"
        >
            <div class="playHeadingContainer">

                <div class="playHeading">
                    <h4
                        class="title"
                        ng-click="selectMobileClipPlay()"
                    >

                        <span class="team">{{teams[play.possessionTeamId].name}}</span>

                        <krossover-play-summaries events="play.events"></krossover-play-summaries>

                    </h4>
                </div>

                <a
                    class="playplay"
                    ng-click="selectMobileClipPlay()"
                >
                    <i class="icon icon-play-circle"></i>
                </a>

            </div>

            <ul
                class="playBody"
                ng-hide="play !== playManager.current || playIsInBreakdown"
            >
                <krossover-event ng-repeat="event in play.events"></krossover-event>
            </ul>
        </div>
    </div>
</div>

<!-- =============== DESKTOP PLAYS =============== -->
<div ng-if="$root.viewport.name === VIEWPORTS.DESKTOP.name">

    <div
        ng-switch
        on="isReelsPlay"
        ng-hide="!play.hasVisibleEvents && !isIndexer"
    >
        <!-- - - - - - - - - REEL PLAY - - - - - - - - -->
        <div
            ng-switch-when="true"
            class="play play__reel"
            ng-class="{ active: play.id == playManager.current.id, 'edit-mode': editFlag }"
        >
            <div class="playHeadingContainer">
                <div
                    class="playHeading"
                    ng-click="selectPlay()"
                >
                    <h4 class="title">
                        <span ng-show="editFlag">{{index + 1}}.&nbsp;</span>
                        <krossover-play-summaries events="play.events"></krossover-play-summaries>
                        <span class="datePlayed">&nbsp;-&nbsp;&nbsp;{{game.datePlayed | date:'MMM. d, yyyy'}}</span>
                    </h4>

                    <h5 class="subtitle">
                        <span class="teams">{{team.name}} vs {{opposingTeam.name}}</span>
                    </h5>

                    <span
                        ng-show="editFlag"
                        class="delete-reel-play"
                        ng-click="deleteReelPlay(index)"
                    >
                        <i class="icon icon-remove"></i>
                    </span>

                </div>

                <span
                    class="playplay"
                    ng-click="videoPlayer.play()"
                    ng-class="{playing: play === playManager.current && videoPlayer.currentState === VG_STATES.PLAY, invisible: editFlag}"
                >
                    <i class="icon icon-play-circle"></i>
                </span>

            </div>

            <ul
                class="playBody"
                ng-show="!editFlag && expandAll"
                ng-hide="!expandAll && (editFlag || play !== playManager.current)"
            >
                <krossover-event ng-repeat="event in play.events"></krossover-event>

            </ul>
        </div>

        <!-- - - - - - - - - DEFAULT PLAY - - - - - - - - -->
        <div
            ng-switch-default
            ng-hide="!play.hasVisibleEvents && !isIndexer"
            class="play"
            ng-class="{ active: play.id == playManager.current.id, 'fully-opaque': expandAll }"
            ng-click="selectPlay()"
        >
            <div class="playHeadingContainer">
                <play-header></play-header>
                <div class="playHeading">

                    <h4 ng-if="isIndexer">
                        <span class="period">{{ league.periodAbbreviationLabel }} {{ play.period }}</span>
                        <span class="dash"> — </span>
                        <time>
                            {{ play.startTime | time }}
                            <span class="dash"> — </span>
                            {{ play.endTime | time }}
                        </time>
                    </h4>

                    <h4 ng-if="isIndexer">
                        <span class="team">{{ team.name }}</span>
                        <span class="score">{{ play.indexedScore }}</span>
                        <span class="vs">&nbsp;vs&nbsp;</span>
                        <span class="score">{{ play.opposingIndexedScore }}</span>
                        <span class="team">{{ opposingTeam.name }}</span>
                    </h4>

                    <h4 class="column" ng-if="!isIndexer">

                        <span class="team">{{teams[play.possessionTeamId].name}}</span>

                        <div class="summariesContainer">

                            <krossover-play-summaries events="play.events"></krossover-play-summaries>

                        </div>

                    </h4>

                </div>

                <span
                    class="playplay"
                    ng-click="videoPlayer.play()"
                    ng-class="{playing: play === playManager.current && videoPlayer.currentState === VG_STATES.PLAY, invisible: editFlag }"
                >
                    <i class="icon icon-play-circle"></i>
                </span>

            </div>

            <ul
                class="playBody"
                ng-if="
                    isIndexer ||
                    expandAll ||
                    play === playManager.current"
                ng-class="{'playHide': (!expandAll && play != playManager.current) }"
            >
                <krossover-event ng-repeat="event in play.events"></krossover-event>
            </ul>

            <hr class="summaryBodyDivider">

            <div class="playFooter">

                <button
                    class="btn-delete-play"
                    ng-if="isIndexer"
                    ng-disabled="play.isSaving"
                    ng-click="deletePlay()"
                >
                    Delete Play
                </button>

                <div class="save-indicator" ng-if="isIndexer">
                    <i
                        class="icon icon-refresh active"
                        ng-show="play.isSaving"
                    ></i>
                    <i
                        class="icon icon-ok success"
                        ng-show="play.id"
                        ng-hide="!play.id || play.isSaving || play.error"
                    ></i>
                    <i
                        class="icon icon-remove error"
                        ng-show="play.error"
                    ></i>
                </div>

                <button
                    class="play-link"
                    ng-if="reelsActive && isTeamMember"
                    open-modal="AddReel.Modal"
                    modal-options="options"
                >
                    <i class="icon icon-plus"></i> Add to reel
                </button>

                <button
                    class="play-link pull-right disabled ng-hide"
                    ng-if="!isIndexer"
                >
                    <i class="icon icon-tag"></i> Label Play
                </button>

            </div>

        </div>

    </div>
</div>
